# Procesado de la imágenes en software fotogramétrico

Una vez capturadas nuestras fotografías toca introducirlas en nuestro software de fotogrametría para generar nuestra nube de puntos. En nuestro caso vamos a usar Photoscan, pero podríamos usar las alternativas gratuitas mencionadas anteriormente.

Si el proceso de captura de fotografías se hizo en condiciones de iluminación controlada y de forma metódica, este paso no requiere mayor complicación, si las fotografías se hicieron a mano alzada o con luz natural, es posible que sea necesario identificar las imágenes problemáticas y eliminarlas para que no dañen el cálculo.

Una vez cargadas nuestras imágenes en Photoscan, el siguiente paso es alinearlas para que el software pueda calcular la posición desde la que fueron tomadas. Al terminar deberíamos tener una nube de puntos de baja resolución y una estimación de la posición de nuestras cámaras como se muestra en la siguiente imagen. Esta fase es ideal para identificar posibles problemas en nuestras fotos. SI vemos que una de nuestras cámaras está mal alineada, podemos eliminarla para evitar problemas y si vemos que nuestra nube de puntos contiene muchos puntos “residuales” podemos eliminarlos para agilizar el proceso posterior.

La siguiente fase del proceso es extremadamente lenta y puede llegar a tardar días de calculo, por lo que se hace especialmente importante asegurarse que todo esta correctamente alineado. Una forma de evitar que el software tenga que calcular zonas innecesarias para optimizar los tiempos es usar máscaras para eliminar de la ecuación el fondo. Esto podemos hacerlo de forma manual, mediante rotoscopía, con diferencia o con Chroma Key en software como After Effect y cargar nuestra mascara con “\_MASK” para que Photoscan la reconozca automáticamente. También existe la posibilidad de usar la geometría de baja resolución calculada previamente como máscara.

 Una vez completado el proceso tendremos una nube de puntos de muy alta densidad con millones de puntos que representan la posición tridimensional de cada uno de los vertices calculados durante el proceso anterior, pero estos puntos aun no definen una geometria tridimensional, son simplemente puntos en el espacio. Para generar nuestra geometria de alta resolución poligonal usaremos la opción de photoscan **Workflow &gt; Build Mesh**

Vamos por buen camino!. Con esto ya tenemos un modelo 3D de alta resolución que representa de forma muy fiel nuestro objeto original, pero aun nos queda mucho trabajo por delante. Ahora es necesario proyectar las fotografías sobre esta geometria, por suerte éste es un proceso muy rápido porque Photoscan ya tiene calculada la posición de cada cámara y simplemente tiene que proyectar las imágenes y generar una textura. En este punto es donde podemos cambiar nuestras imágenes contrastadas por nuestras texturas lineales obtenidas con DCRAW para garantizar un albedo correcto.

Una vez terminado el proceso tendremos nuestro modelo 3D y nuestras texturas lineales aplicadas sobre unas coordenadas de mapeado automáticas creadas por Photoscan. La cosa va tomando forma, pero este modelo aun no esta listo para ser usado en producción, estamos hablando de un modelo con millones de polígonos y coordenadas de mapeado automáticas difíciles de gestionar, ademas, el software de fotogrametría no suele ser capaz de representar correctamente superficies completamente pulidas por lo que se suele hacer necesario un trabajo posterior para corregir el modelo en Zbrush. En la parte 2 de esta guía podrás descubrir como transformar este modelo de alta resolución en un modelo más manejable y como trasladar la información de altura y el albedo a unas nuevas coordenadas de mapeado creadas manualmente

La fotogrametria con cámaras de alta resolución es excelente para capturar modelos tridimensionales con gran cantidad de detalles geométricos, pero para poder usar estos modelos de forma eficiente, es necesario transformar el modelo escaneado en un modelo de menor resolución poligonal y trasladar los detalles de alta frecuencia del modelo a un mapa de normales. Todos los modelos de esta librería están optimizados para reducir su carga poligonal y cuentan con mapas de normales de 4K y 2K pensando en su uso dentro de proyectos profesionales.

